{"version":3,"sources":["../src/stats/fft.ts","../src/stats/ess.ts","../src/stats/rhat.ts","../src/utils.ts","../src/stats/summary.ts","../src/exporters/index.ts","../src/inference-data.ts","../src/parsers/turing-csv.ts","../src/parsers/stan-csv.ts","../src/parsers/mcmcchains-json.ts","../src/parsers/detect.ts","../src/plots/index.ts","../src/plots/types.ts","../src/plots/trace.ts","../src/plots/histogram.ts","../src/plots/autocorrelation.ts","../src/plots/forest.ts","../src/plots/cumulative-mean.ts","../src/plots/pairs.ts","../src/plots/summary-table.ts","../src/index.ts"],"sourcesContent":["export function transform(\n  real: number[] | Float64Array,\n  imag: number[] | Float64Array,\n): void {\n  const n = real.length;\n  if (n !== imag.length) throw new RangeError('Mismatched lengths');\n  if (n === 0) return;\n  if ((n & (n - 1)) === 0) transformRadix2(real, imag);\n  else transformBluestein(real, imag);\n}\n\nexport function inverseTransform(\n  real: number[] | Float64Array,\n  imag: number[] | Float64Array,\n): void {\n  transform(imag, real);\n}\n\nfunction transformRadix2(\n  real: number[] | Float64Array,\n  imag: number[] | Float64Array,\n): void {\n  const n = real.length;\n  if (n === 1) return;\n\n  let levels = -1;\n  for (let i = 0; i < 32; i++) {\n    if (1 << i === n) levels = i;\n  }\n  if (levels === -1) throw new RangeError('Length is not a power of 2');\n\n  const cosTable = new Array<number>(n / 2);\n  const sinTable = new Array<number>(n / 2);\n  for (let i = 0; i < n / 2; i++) {\n    cosTable[i] = Math.cos((2 * Math.PI * i) / n);\n    sinTable[i] = Math.sin((2 * Math.PI * i) / n);\n  }\n\n  for (let i = 0; i < n; i++) {\n    const j = reverseBits(i, levels);\n    if (j > i) {\n      let temp = real[i]!;\n      real[i] = real[j]!;\n      real[j] = temp;\n      temp = imag[i]!;\n      imag[i] = imag[j]!;\n      imag[j] = temp;\n    }\n  }\n\n  for (let size = 2; size <= n; size *= 2) {\n    const halfsize = size / 2;\n    const tablestep = n / size;\n    for (let i = 0; i < n; i += size) {\n      for (let j = i, k = 0; j < i + halfsize; j++, k += tablestep) {\n        const l = j + halfsize;\n        const tpre = real[l]! * cosTable[k]! + imag[l]! * sinTable[k]!;\n        const tpim = -real[l]! * sinTable[k]! + imag[l]! * cosTable[k]!;\n        real[l] = real[j]! - tpre;\n        imag[l] = imag[j]! - tpim;\n        real[j] = real[j]! + tpre;\n        imag[j] = imag[j]! + tpim;\n      }\n    }\n  }\n}\n\nfunction reverseBits(val: number, width: number): number {\n  let result = 0;\n  for (let i = 0; i < width; i++) {\n    result = (result << 1) | (val & 1);\n    val >>>= 1;\n  }\n  return result;\n}\n\nfunction transformBluestein(\n  real: number[] | Float64Array,\n  imag: number[] | Float64Array,\n): void {\n  const n = real.length;\n  let m = 1;\n  while (m < n * 2 + 1) m *= 2;\n\n  const cosTable = new Array<number>(n);\n  const sinTable = new Array<number>(n);\n  for (let i = 0; i < n; i++) {\n    const j = (i * i) % (n * 2);\n    cosTable[i] = Math.cos((Math.PI * j) / n);\n    sinTable[i] = Math.sin((Math.PI * j) / n);\n  }\n\n  const areal = zeros(m);\n  const aimag = zeros(m);\n  for (let i = 0; i < n; i++) {\n    areal[i] = real[i]! * cosTable[i]! + imag[i]! * sinTable[i]!;\n    aimag[i] = -real[i]! * sinTable[i]! + imag[i]! * cosTable[i]!;\n  }\n\n  const breal = zeros(m);\n  const bimag = zeros(m);\n  breal[0] = cosTable[0]!;\n  bimag[0] = sinTable[0]!;\n  for (let i = 1; i < n; i++) {\n    breal[i] = breal[m - i] = cosTable[i]!;\n    bimag[i] = bimag[m - i] = sinTable[i]!;\n  }\n\n  const creal = new Array<number>(m);\n  const cimag = new Array<number>(m);\n  convolveComplex(areal, aimag, breal, bimag, creal, cimag);\n\n  for (let i = 0; i < n; i++) {\n    real[i] = creal[i]! * cosTable[i]! + cimag[i]! * sinTable[i]!;\n    imag[i] = -creal[i]! * sinTable[i]! + cimag[i]! * cosTable[i]!;\n  }\n}\n\nfunction convolveComplex(\n  xreal: number[],\n  ximag: number[],\n  yreal: number[],\n  yimag: number[],\n  outreal: number[],\n  outimag: number[],\n): void {\n  const n = xreal.length;\n  xreal = xreal.slice();\n  ximag = ximag.slice();\n  yreal = yreal.slice();\n  yimag = yimag.slice();\n\n  transform(xreal, ximag);\n  transform(yreal, yimag);\n\n  for (let i = 0; i < n; i++) {\n    const temp = xreal[i]! * yreal[i]! - ximag[i]! * yimag[i]!;\n    ximag[i] = ximag[i]! * yreal[i]! + xreal[i]! * yimag[i]!;\n    xreal[i] = temp;\n  }\n  inverseTransform(xreal, ximag);\n\n  for (let i = 0; i < n; i++) {\n    outreal[i] = xreal[i]! / n;\n    outimag[i] = ximag[i]! / n;\n  }\n}\n\nfunction zeros(n: number): number[] {\n  const result: number[] = [];\n  for (let i = 0; i < n; i++) result.push(0);\n  return result;\n}\n","import { transform, inverseTransform } from './fft';\n\nexport function computeESS(chain: Float64Array): { ess: number; autocorrelation: number[] } {\n  if (chain.length < 4) return { ess: 0, autocorrelation: [] };\n\n  const acor = autocorrFFT(chain, chain.length);\n  const n = firstNegPairStart(acor);\n\n  let prevMin = 1;\n  let accum = 0;\n  let i = 1;\n  while (i + 1 < n) {\n    prevMin = Math.min(prevMin, acor[i]! + acor[i + 1]!);\n    accum += prevMin;\n    i += 2;\n  }\n\n  const sigmaSqHat = acor[0]! + 2 * accum;\n  const ess = chain.length / sigmaSqHat;\n  return {\n    ess,\n    autocorrelation: acor.map(v => (Number.isNaN(v) ? 0 : v)),\n  };\n}\n\nfunction autocorrFFT(chain: Float64Array, n: number): number[] {\n  const size = Math.round(Math.pow(2, Math.ceil(Math.log2(2 * chain.length - 1))));\n  const variance = computeVariance(chain);\n  if (variance === undefined || variance === 0) return [];\n\n  const mean = computeMeanF64(chain);\n  const ndata: number[] = new Array(size).fill(0);\n  for (let i = 0; i < chain.length; i++) {\n    ndata[i] = chain[i]! - mean;\n  }\n\n  const ndataImag: number[] = new Array(size).fill(0);\n  transform(ndata, ndataImag);\n\n  const pwr = ndata.map((r, i) => r * r + ndataImag[i]! * ndataImag[i]!);\n  const acorrImag: number[] = new Array(pwr.length).fill(0);\n  inverseTransform(pwr, acorrImag);\n\n  return pwr.slice(0, n).map(x => x / variance / ndata.length / chain.length);\n}\n\nfunction firstNegPairStart(chain: number[]): number {\n  const N = chain.length;\n  let n = 0;\n  while (n + 1 < N) {\n    if (chain[n]! + chain[n + 1]! < 0) return n;\n    n++;\n  }\n  return N;\n}\n\nfunction computeMeanF64(arr: Float64Array): number {\n  let sum = 0;\n  for (let i = 0; i < arr.length; i++) sum += arr[i]!;\n  return sum / arr.length;\n}\n\nfunction computeVariance(arr: Float64Array): number | undefined {\n  if (arr.length === 0) return undefined;\n  const mean = computeMeanF64(arr);\n  let sum = 0;\n  for (let i = 0; i < arr.length; i++) {\n    const d = arr[i]! - mean;\n    sum += d * d;\n  }\n  return sum / arr.length;\n}\n","export function computeRhat(\n  chainMeans: number[],\n  chainStdevs: number[],\n  chainCounts: number[],\n): number | undefined {\n  if (chainMeans.length <= 1) return undefined;\n  for (const c of chainCounts) {\n    if (c <= 1) return undefined;\n  }\n\n  const m = chainMeans.length;\n  const meanChainLength = mean(chainCounts);\n  if (meanChainLength === undefined) return undefined;\n\n  const vars = chainStdevs.map((s, i) => (s * s * chainCounts[i]!) / (chainCounts[i]! - 1));\n\n  const stdevOfMeans = stdev(chainMeans);\n  if (stdevOfMeans === undefined) return undefined;\n\n  const varOfMeans = (stdevOfMeans * stdevOfMeans * m) / (m - 1);\n  const meanOfVars = mean(vars);\n  if (meanOfVars === undefined || meanOfVars === 0) return undefined;\n\n  return Math.sqrt((meanChainLength - 1) / meanChainLength + varOfMeans / meanOfVars);\n}\n\nfunction mean(arr: number[]): number | undefined {\n  if (arr.length === 0) return undefined;\n  let sum = 0;\n  for (const v of arr) sum += v;\n  return sum / arr.length;\n}\n\nfunction stdev(arr: number[]): number | undefined {\n  if (arr.length <= 1) return undefined;\n  const m = mean(arr)!;\n  let sumsq = 0;\n  for (const v of arr) sumsq += v * v;\n  return Math.sqrt(sumsq / arr.length - m * m);\n}\n","export function parseCSVLine(line: string): string[] {\n  const fields: string[] = [];\n  let current = '';\n  let inQuotes = false;\n\n  for (let i = 0; i < line.length; i++) {\n    const ch = line[i]!;\n    if (inQuotes) {\n      if (ch === '\"' && line[i + 1] === '\"') {\n        current += '\"';\n        i++;\n      } else if (ch === '\"') {\n        inQuotes = false;\n      } else {\n        current += ch;\n      }\n    } else {\n      if (ch === '\"') {\n        inQuotes = true;\n      } else if (ch === ',') {\n        fields.push(current);\n        current = '';\n      } else {\n        current += ch;\n      }\n    }\n  }\n  fields.push(current);\n  return fields;\n}\n\nexport function splitLines(text: string): string[] {\n  return text.split(/\\r?\\n/).filter(line => line.trim().length > 0);\n}\n\nexport function quantile(sorted: Float64Array, q: number): number {\n  if (sorted.length === 0) return NaN;\n  if (sorted.length === 1) return sorted[0]!;\n  const pos = q * (sorted.length - 1);\n  const lo = Math.floor(pos);\n  const hi = Math.ceil(pos);\n  const frac = pos - lo;\n  return sorted[lo]! * (1 - frac) + sorted[hi]! * frac;\n}\n\nexport function sortedCopy(arr: Float64Array): Float64Array {\n  const copy = new Float64Array(arr);\n  copy.sort();\n  return copy;\n}\n\nexport function fromStanName(name: string): string {\n  if (!name.includes('.')) return name;\n  const parts = name.split('.');\n  const base = parts[0]!;\n  const indices = parts.slice(1);\n  if (indices.length > 0 && indices.every(p => p.length > 0 && /^\\d+$/.test(p))) {\n    return `${base}[${indices.join(',')}]`;\n  }\n  return name;\n}\n\nexport function toStanName(name: string): string {\n  const m = name.match(/^(.+)\\[(.+)\\]$/);\n  if (!m) return name;\n  return `${m[1]}.${m[2]!.replace(/,/g, '.')}`;\n}\n","import { quantile, sortedCopy } from '../utils';\n\nexport function computeMean(arr: Float64Array): number {\n  if (arr.length === 0) return NaN;\n  let sum = 0;\n  for (let i = 0; i < arr.length; i++) sum += arr[i]!;\n  return sum / arr.length;\n}\n\nexport function computeStdev(arr: Float64Array): number {\n  if (arr.length <= 1) return NaN;\n  const m = computeMean(arr);\n  let sumsq = 0;\n  for (let i = 0; i < arr.length; i++) sumsq += arr[i]! * arr[i]!;\n  return Math.sqrt(sumsq / arr.length - m * m);\n}\n\nexport function computeQuantiles(arr: Float64Array) {\n  const sorted = sortedCopy(arr);\n  return {\n    q5: quantile(sorted, 0.05),\n    q25: quantile(sorted, 0.25),\n    q50: quantile(sorted, 0.50),\n    q75: quantile(sorted, 0.75),\n    q95: quantile(sorted, 0.95),\n  };\n}\n\nexport function computeHDI(arr: Float64Array, credMass = 0.9): [number, number] {\n  const sorted = sortedCopy(arr);\n  const n = sorted.length;\n  const intervalSize = Math.ceil(credMass * n);\n  if (intervalSize >= n) return [sorted[0]!, sorted[n - 1]!];\n\n  let bestWidth = Infinity;\n  let bestLo = 0;\n\n  for (let i = 0; i <= n - intervalSize; i++) {\n    const width = sorted[i + intervalSize - 1]! - sorted[i]!;\n    if (width < bestWidth) {\n      bestWidth = width;\n      bestLo = i;\n    }\n  }\n\n  return [sorted[bestLo]!, sorted[bestLo + intervalSize - 1]!];\n}\n","import type { InferenceData } from '../types';\nimport { toStanName } from '../utils';\n\nexport function toTuringCSV(data: InferenceData): string {\n  const lines: string[] = [];\n  for (const chainName of data.chainNames) {\n    const chain = data.chains.get(chainName)!;\n    for (const varName of data.variableNames) {\n      const draws = chain.draws.get(varName);\n      if (!draws) continue;\n      for (let i = 0; i < draws.length; i++) {\n        lines.push(`${chainName},${varName},${i},${draws[i]}`);\n      }\n    }\n  }\n  return lines.join('\\n');\n}\n\nexport function toMCMCChainsCSV(data: InferenceData): string {\n  const lines: string[] = [];\n  lines.push(['iteration', 'chain', ...data.variableNames].join(','));\n  for (const chainName of data.chainNames) {\n    const chain = data.chains.get(chainName)!;\n    for (let i = 0; i < chain.drawCount; i++) {\n      const vals: string[] = [`${i + 1}`, chainName];\n      for (const v of data.variableNames) {\n        const draws = chain.draws.get(v);\n        vals.push(draws && i < draws.length ? `${draws[i]}` : '');\n      }\n      lines.push(vals.join(','));\n    }\n  }\n  return lines.join('\\n');\n}\n\nexport function toStanCSV(data: InferenceData): string {\n  const sections: string[] = [];\n  for (let ci = 0; ci < data.chainNames.length; ci++) {\n    const chainName = data.chainNames[ci]!;\n    const chain = data.chains.get(chainName)!;\n\n    const lines: string[] = [];\n    lines.push(`# Stan CSV export - ${chainName}`);\n    lines.push(`# model = mcmc-visualizer export`);\n    lines.push(`# method = sample`);\n\n    const stanNames = data.variableNames.map(toStanName);\n    const headerCols = ['lp__', 'accept_stat__', ...stanNames];\n    lines.push(headerCols.join(','));\n\n    for (let i = 0; i < chain.drawCount; i++) {\n      const vals: string[] = ['0', '1'];\n      for (const v of data.variableNames) {\n        const draws = chain.draws.get(v);\n        vals.push(draws && i < draws.length ? `${draws[i]}` : '');\n      }\n      lines.push(vals.join(','));\n    }\n\n    sections.push(lines.join('\\n'));\n  }\n  return sections.join('\\n\\n');\n}\n\nexport function toWideCSV(data: InferenceData): string {\n  const lines: string[] = [];\n  lines.push(['chain_', 'draw_', ...data.variableNames].join(','));\n\n  for (const chainName of data.chainNames) {\n    const chain = data.chains.get(chainName)!;\n    for (let i = 0; i < chain.drawCount; i++) {\n      const vals: string[] = [chainName, `${i + 1}`];\n      for (const v of data.variableNames) {\n        const draws = chain.draws.get(v);\n        vals.push(draws && i < draws.length ? `${draws[i]}` : '');\n      }\n      lines.push(vals.join(','));\n    }\n  }\n\n  return lines.join('\\n');\n}\n\nexport function toJSON(data: InferenceData): string {\n  const result: Record<string, Record<string, number[]>> = {};\n  for (const chainName of data.chainNames) {\n    const chain = data.chains.get(chainName)!;\n    const chainObj: Record<string, number[]> = {};\n    for (const varName of data.variableNames) {\n      const draws = chain.draws.get(varName);\n      chainObj[varName] = draws ? Array.from(draws) : [];\n    }\n    result[chainName] = chainObj;\n  }\n  return JSON.stringify(result, null, 2);\n}\n\nexport function toMCMCChainsJSON(data: InferenceData): string {\n  const nIter = data.drawCount;\n  const nParams = data.variableNames.length;\n  const nChains = data.chainNames.length;\n\n  const flat: (number | null)[] = new Array(nIter * nParams * nChains);\n  for (let c = 0; c < nChains; c++) {\n    const chain = data.chains.get(data.chainNames[c]!)!;\n    for (let p = 0; p < nParams; p++) {\n      const draws = chain.draws.get(data.variableNames[p]!);\n      for (let i = 0; i < nIter; i++) {\n        const flatIdx = i + p * nIter + c * nIter * nParams;\n        flat[flatIdx] = draws && i < draws.length ? draws[i]! : null;\n      }\n    }\n  }\n\n  const obj = {\n    size: [nIter, nParams, nChains],\n    value_flat: flat,\n    iterations: Array.from({ length: nIter }, (_, i) => i + 1),\n    parameters: data.variableNames,\n    chains: Array.from({ length: nChains }, (_, i) => i + 1),\n    logevidence: null,\n    name_map: { parameters: data.variableNames, internals: [] as string[] },\n    info: {},\n  };\n  return JSON.stringify(obj);\n}\n","import type {\n  ChainData,\n  InferenceData,\n  SequenceStats,\n  VariableStats,\n  VariableSummary,\n} from './types';\nimport { computeESS } from './stats/ess';\nimport { computeRhat } from './stats/rhat';\nimport { computeMean, computeStdev, computeQuantiles, computeHDI } from './stats/summary';\nimport { toTuringCSV, toMCMCChainsCSV, toStanCSV, toWideCSV, toJSON, toMCMCChainsJSON } from './exporters';\n\nexport class MCMCData implements InferenceData {\n  readonly chains: ReadonlyMap<string, ChainData>;\n  readonly variableNames: string[];\n  readonly chainNames: string[];\n  readonly drawCount: number;\n\n  constructor(chains: Map<string, ChainData>) {\n    this.chains = chains;\n    this.chainNames = Array.from(chains.keys());\n\n    const varSet = new Set<string>();\n    let maxDraws = 0;\n    for (const chain of chains.values()) {\n      for (const v of chain.draws.keys()) varSet.add(v);\n      maxDraws = Math.max(maxDraws, chain.drawCount);\n    }\n    this.variableNames = Array.from(varSet);\n    this.drawCount = maxDraws;\n  }\n\n  getDraws(variable: string, chain?: string): Float64Array {\n    if (chain) {\n      const c = this.chains.get(chain);\n      if (!c) throw new Error(`Chain \"${chain}\" not found`);\n      const draws = c.draws.get(variable);\n      if (!draws) throw new Error(`Variable \"${variable}\" not found in chain \"${chain}\"`);\n      return draws;\n    }\n    return this.getAllDraws(variable);\n  }\n\n  getAllDraws(variable: string): Float64Array {\n    const arrays: Float64Array[] = [];\n    let totalLen = 0;\n    for (const chain of this.chains.values()) {\n      const d = chain.draws.get(variable);\n      if (d) {\n        arrays.push(d);\n        totalLen += d.length;\n      }\n    }\n    const result = new Float64Array(totalLen);\n    let offset = 0;\n    for (const arr of arrays) {\n      result.set(arr, offset);\n      offset += arr.length;\n    }\n    return result;\n  }\n\n  sequenceStats(variable: string, chain: string): SequenceStats {\n    const draws = this.getDraws(variable, chain);\n    const mean = computeMean(draws);\n    const stdev = computeStdev(draws);\n    const { ess, autocorrelation } = computeESS(draws);\n    return { mean, stdev, count: draws.length, ess, autocorrelation };\n  }\n\n  variableStats(variable: string): VariableStats {\n    const chainMeans: number[] = [];\n    const chainStdevs: number[] = [];\n    const chainCounts: number[] = [];\n    let totalESS = 0;\n\n    for (const chainName of this.chainNames) {\n      const chain = this.chains.get(chainName)!;\n      const draws = chain.draws.get(variable);\n      if (!draws || draws.length === 0) continue;\n\n      const m = computeMean(draws);\n      const s = computeStdev(draws);\n      const { ess } = computeESS(draws);\n      chainMeans.push(m);\n      chainStdevs.push(isNaN(s) ? 0 : s);\n      chainCounts.push(draws.length);\n      totalESS += ess;\n    }\n\n    const allDraws = this.getAllDraws(variable);\n    const quantiles = computeQuantiles(allDraws);\n    const hdi90 = computeHDI(allDraws, 0.9);\n    const rhat = computeRhat(chainMeans, chainStdevs, chainCounts);\n\n    return {\n      mean: computeMean(allDraws),\n      stdev: computeStdev(allDraws),\n      count: allDraws.length,\n      ess: totalESS,\n      rhat,\n      quantiles,\n      hdi90,\n    };\n  }\n\n  summary(): VariableSummary[] {\n    return this.variableNames.map(variable => ({\n      variable,\n      ...this.variableStats(variable),\n    }));\n  }\n\n  toTuringCSV(): string {\n    return toTuringCSV(this);\n  }\n\n  toMCMCChainsCSV(): string {\n    return toMCMCChainsCSV(this);\n  }\n\n  toStanCSV(): string {\n    return toStanCSV(this);\n  }\n\n  toWideCSV(): string {\n    return toWideCSV(this);\n  }\n\n  toJSON(): string {\n    return toJSON(this);\n  }\n\n  toMCMCChainsJSON(): string {\n    return toMCMCChainsJSON(this);\n  }\n\n  slice(start: number, end?: number): InferenceData {\n    const newChains = new Map<string, ChainData>();\n    for (const [name, chain] of this.chains) {\n      const newDraws = new Map<string, Float64Array>();\n      let maxLen = 0;\n      for (const [v, draws] of chain.draws) {\n        const sliced = draws.slice(start, end);\n        newDraws.set(v, sliced);\n        maxLen = Math.max(maxLen, sliced.length);\n      }\n      newChains.set(name, { name, draws: newDraws, drawCount: maxLen });\n    }\n    return new MCMCData(newChains);\n  }\n\n  filterChains(chainNames: string[]): InferenceData {\n    const newChains = new Map<string, ChainData>();\n    for (const name of chainNames) {\n      const chain = this.chains.get(name);\n      if (chain) newChains.set(name, chain);\n    }\n    return new MCMCData(newChains);\n  }\n\n  filterVariables(variableNames: string[]): InferenceData {\n    const varSet = new Set(variableNames);\n    const newChains = new Map<string, ChainData>();\n    for (const [name, chain] of this.chains) {\n      const newDraws = new Map<string, Float64Array>();\n      let maxLen = 0;\n      for (const [v, draws] of chain.draws) {\n        if (varSet.has(v)) {\n          newDraws.set(v, draws);\n          maxLen = Math.max(maxLen, draws.length);\n        }\n      }\n      newChains.set(name, { name, draws: newDraws, drawCount: maxLen });\n    }\n    return new MCMCData(newChains);\n  }\n}\n","import type { ChainData } from '../types';\nimport { splitLines, parseCSVLine } from '../utils';\n\nexport function parseTuringCSV(text: string): Map<string, ChainData> {\n  const lines = splitLines(text);\n  if (lines.length === 0) throw new Error('Empty input');\n\n  const firstFields = parseCSVLine(lines[0]!);\n\n  if (firstFields[0] === 'iteration' && firstFields[1] === 'chain') {\n    return parseWideFormat(lines, 'iteration', 'chain');\n  }\n  if (firstFields[0] === 'chain_' && firstFields[1] === 'draw_') {\n    return parseWideFormat(lines, 'chain_', 'draw_');\n  }\n\n  if (firstFields.length === 4 && !isNaN(parseFloat(firstFields[2]!))) {\n    return parseLongFormat(lines);\n  }\n\n  throw new Error('Unrecognized Turing CSV format');\n}\n\nfunction parseLongFormat(lines: string[]): Map<string, ChainData> {\n  const raw = new Map<string, Map<string, number[]>>();\n\n  for (const line of lines) {\n    const fields = parseCSVLine(line);\n    if (fields.length < 4) continue;\n    const chainName = fields[0]!;\n    const varName = fields[1]!;\n    const value = parseFloat(fields[3]!);\n    if (isNaN(value)) continue;\n\n    let chainVars = raw.get(chainName);\n    if (!chainVars) {\n      chainVars = new Map();\n      raw.set(chainName, chainVars);\n    }\n    let values = chainVars.get(varName);\n    if (!values) {\n      values = [];\n      chainVars.set(varName, values);\n    }\n    values.push(value);\n  }\n\n  return buildChainData(raw);\n}\n\nfunction parseWideFormat(\n  lines: string[],\n  chainCol: string,\n  drawCol: string,\n): Map<string, ChainData> {\n  const headers = parseCSVLine(lines[0]!);\n  const chainIdx = headers.indexOf(chainCol === 'chain_' ? 'chain_' : 'chain');\n  const drawIdx = headers.indexOf(drawCol === 'draw_' ? 'draw_' : 'iteration');\n\n  const isChainFirst = chainCol === 'chain_';\n\n  const variableNames = headers.filter(\n    (_, i) =>\n      i !== (isChainFirst ? 0 : headers.indexOf('iteration')) &&\n      i !== (isChainFirst ? 1 : headers.indexOf('chain')),\n  );\n\n  const variableIndices = variableNames.map(v => headers.indexOf(v));\n\n  const raw = new Map<string, Map<string, number[]>>();\n\n  for (let i = 1; i < lines.length; i++) {\n    const fields = parseCSVLine(lines[i]!);\n    if (fields.length < headers.length) continue;\n\n    const chainName = isChainFirst ? fields[0]! : fields[chainIdx]!;\n\n    let chainVars = raw.get(chainName);\n    if (!chainVars) {\n      chainVars = new Map();\n      raw.set(chainName, chainVars);\n    }\n\n    for (let j = 0; j < variableNames.length; j++) {\n      const varName = variableNames[j]!;\n      const value = parseFloat(fields[variableIndices[j]!]!);\n      if (isNaN(value)) continue;\n\n      let values = chainVars.get(varName);\n      if (!values) {\n        values = [];\n        chainVars.set(varName, values);\n      }\n      values.push(value);\n    }\n  }\n\n  return buildChainData(raw);\n}\n\nfunction buildChainData(raw: Map<string, Map<string, number[]>>): Map<string, ChainData> {\n  const chains = new Map<string, ChainData>();\n\n  for (const [chainName, vars] of raw) {\n    const draws = new Map<string, Float64Array>();\n    let maxLen = 0;\n    for (const [varName, values] of vars) {\n      const arr = new Float64Array(values);\n      draws.set(varName, arr);\n      maxLen = Math.max(maxLen, arr.length);\n    }\n    chains.set(chainName, { name: chainName, draws, drawCount: maxLen });\n  }\n\n  return chains;\n}\n","import type { ChainData } from '../types';\nimport { splitLines, parseCSVLine, fromStanName } from '../utils';\n\nexport function parseStanCSV(text: string): Map<string, ChainData> {\n  return parseStanCSVFiles([text]);\n}\n\nexport function parseStanCSVFiles(files: string[]): Map<string, ChainData> {\n  const chains = new Map<string, ChainData>();\n\n  for (let idx = 0; idx < files.length; idx++) {\n    const text = files[idx]!;\n    const chainName = `chain#${idx + 1}`;\n    const lines = splitLines(text);\n\n    const dataLines = lines.filter(l => !l.startsWith('#'));\n    if (dataLines.length < 2) continue;\n\n    const headers = parseCSVLine(dataLines[0]!);\n    const keepIndices: number[] = [];\n    const varNames: string[] = [];\n\n    for (let i = 0; i < headers.length; i++) {\n      const h = headers[i]!;\n      if (!h.endsWith('__')) {\n        keepIndices.push(i);\n        varNames.push(fromStanName(h));\n      }\n    }\n\n    const draws = new Map<string, number[]>();\n    for (const v of varNames) draws.set(v, []);\n\n    for (let i = 1; i < dataLines.length; i++) {\n      const fields = parseCSVLine(dataLines[i]!);\n      if (fields.length < headers.length) continue;\n\n      for (let j = 0; j < keepIndices.length; j++) {\n        const value = parseFloat(fields[keepIndices[j]!]!);\n        if (!isNaN(value)) {\n          draws.get(varNames[j]!)!.push(value);\n        }\n      }\n    }\n\n    const typedDraws = new Map<string, Float64Array>();\n    let maxLen = 0;\n    for (const [v, arr] of draws) {\n      const typed = new Float64Array(arr);\n      typedDraws.set(v, typed);\n      maxLen = Math.max(maxLen, typed.length);\n    }\n\n    chains.set(chainName, { name: chainName, draws: typedDraws, drawCount: maxLen });\n  }\n\n  return chains;\n}\n","import type { ChainData } from '../types';\n\ninterface MCMCChainsJSON {\n  size: [number, number, number];\n  value_flat: (number | null)[];\n  iterations: number[];\n  parameters: string[];\n  chains: number[];\n  logevidence?: unknown;\n  name_map?: Record<string, string[]>;\n  info?: Record<string, unknown>;\n}\n\nexport function parseMCMCChainsJSON(text: string): Map<string, ChainData> {\n  const obj = JSON.parse(text) as MCMCChainsJSON;\n\n  if (!obj.size || !obj.value_flat || !obj.parameters || !obj.chains) {\n    throw new Error('Invalid MCMCChains JSON: missing required fields (size, value_flat, parameters, chains)');\n  }\n\n  const [nIter, nParams, nChains] = obj.size;\n  const flat = obj.value_flat;\n  const paramNames = obj.parameters;\n  const chainIds = obj.chains;\n\n  if (flat.length !== nIter * nParams * nChains) {\n    throw new Error(\n      `MCMCChains JSON size mismatch: expected ${nIter * nParams * nChains} values, got ${flat.length}`,\n    );\n  }\n\n  const internals = new Set(obj.name_map?.internals ?? []);\n\n  const chains = new Map<string, ChainData>();\n\n  for (let c = 0; c < nChains; c++) {\n    const chainName = `chain#${chainIds[c] ?? c + 1}`;\n    const draws = new Map<string, Float64Array>();\n\n    for (let p = 0; p < nParams; p++) {\n      const name = paramNames[p]!;\n      if (internals.has(name)) continue;\n\n      const arr = new Float64Array(nIter);\n      for (let i = 0; i < nIter; i++) {\n        const flatIdx = i + p * nIter + c * nIter * nParams;\n        const val = flat[flatIdx];\n        arr[i] = val === null || val === undefined ? NaN : val;\n      }\n      draws.set(name, arr);\n    }\n\n    chains.set(chainName, { name: chainName, draws, drawCount: nIter });\n  }\n\n  return chains;\n}\n\nexport function isMCMCChainsJSON(text: string): boolean {\n  const trimmed = text.trimStart();\n  if (!trimmed.startsWith('{')) return false;\n  try {\n    const obj = JSON.parse(trimmed);\n    return (\n      Array.isArray(obj.size) &&\n      obj.size.length === 3 &&\n      Array.isArray(obj.value_flat) &&\n      Array.isArray(obj.parameters)\n    );\n  } catch {\n    return false;\n  }\n}\n","import type { FileFormat } from '../types';\nimport { splitLines, parseCSVLine } from '../utils';\nimport { isMCMCChainsJSON } from './mcmcchains-json';\n\nexport function detectFormat(text: string): FileFormat {\n  const trimmed = text.trimStart();\n  if (trimmed.startsWith('{') && isMCMCChainsJSON(trimmed)) return 'mcmcchains-json';\n\n  const lines = splitLines(text);\n  if (lines.length === 0) return 'unknown';\n\n  if (isStanCSV(lines)) return 'stan-csv';\n  if (isTuringCSVWide(lines)) return 'turing-csv';\n  if (isTuringCSVLong(lines)) return 'turing-csv';\n\n  return 'unknown';\n}\n\nfunction isStanCSV(lines: string[]): boolean {\n  if (!lines[0]?.startsWith('#')) return false;\n  const dataLines = lines.filter(l => !l.startsWith('#'));\n  if (dataLines.length < 1) return false;\n  const headers = parseCSVLine(dataLines[0]!);\n  return headers[0] === 'lp__' && headers[1] === 'accept_stat__';\n}\n\nfunction isTuringCSVWide(lines: string[]): boolean {\n  const headers = parseCSVLine(lines[0]!);\n  return (\n    (headers[0] === 'iteration' && headers[1] === 'chain') ||\n    (headers[0] === 'chain_' && headers[1] === 'draw_')\n  );\n}\n\nfunction isTuringCSVLong(lines: string[]): boolean {\n  if (lines.length < 2) return false;\n  const first = parseCSVLine(lines[0]!);\n  if (first.length !== 4) return false;\n  const drawIdx = parseFloat(first[2]!);\n  const value = parseFloat(first[3]!);\n  return !isNaN(drawIdx) && !isNaN(value) && Number.isInteger(drawIdx);\n}\n","export { tracePlot } from './trace';\nexport { histogramPlot } from './histogram';\nexport { autocorrelationPlot } from './autocorrelation';\nexport { forestPlot } from './forest';\nexport { cumulativeMeanPlot } from './cumulative-mean';\nexport { pairPlot } from './pairs';\nexport { summaryTable } from './summary-table';\n\nexport type { PlotOptions, PlotHandle } from './types';\n","export interface PlotOptions {\n  height?: number;\n  width?: number;\n  theme?: 'dark' | 'light';\n}\n\nexport interface PlotHandle {\n  destroy(): void;\n  update(variable?: string): void;\n}\n\nexport const CHAIN_COLORS = [\n  '#636EFA', '#EF553B', '#00CC96', '#AB63FA',\n  '#FFA15A', '#19D3F3', '#FF6692', '#B6E880',\n];\n\nconst FONT = \"Inter, system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif\";\n\nexport function darkLayout(opts?: PlotOptions): Record<string, unknown> {\n  return {\n    paper_bgcolor: '#181b26',\n    plot_bgcolor: '#13151e',\n    font: { color: '#eaedf3', family: FONT, size: 12 },\n    xaxis: { gridcolor: '#262a3a', zerolinecolor: '#3a3f52', linecolor: '#2f3447' },\n    yaxis: { gridcolor: '#262a3a', zerolinecolor: '#3a3f52', linecolor: '#2f3447' },\n    margin: { t: 40, r: 20, b: 50, l: 60 },\n    height: opts?.height,\n    width: opts?.width,\n    hoverlabel: { bgcolor: '#1e2130', bordercolor: '#3a3f52', font: { color: '#eaedf3' } },\n  };\n}\n\nexport function lightLayout(opts?: PlotOptions): Record<string, unknown> {\n  return {\n    paper_bgcolor: '#ffffff',\n    plot_bgcolor: '#f8f9fa',\n    font: { color: '#1a1a1a', family: FONT, size: 12 },\n    xaxis: { gridcolor: '#e5e7eb', zerolinecolor: '#d1d5db', linecolor: '#d1d5db' },\n    yaxis: { gridcolor: '#e5e7eb', zerolinecolor: '#d1d5db', linecolor: '#d1d5db' },\n    margin: { t: 40, r: 20, b: 50, l: 60 },\n    height: opts?.height,\n    width: opts?.width,\n  };\n}\n\nexport function getLayout(opts?: PlotOptions): Record<string, unknown> {\n  return opts?.theme === 'light' ? lightLayout(opts) : darkLayout(opts);\n}\n\nexport function getPlotly(): any {\n  const g: any = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : undefined;\n  if (g?.Plotly) return g.Plotly;\n  throw new Error(\n    'Plotly.js is required for plotting. Add <script src=\"https://cdn.plot.ly/plotly-2.35.0.min.js\"></script> or install plotly.js-dist-min',\n  );\n}\n\nexport function getConfig(): Record<string, unknown> {\n  return {\n    responsive: true,\n    displaylogo: false,\n    toImageButtonOptions: { format: 'png', height: 600, width: 1200, scale: 2 },\n  };\n}\n","import type { InferenceData } from '../types';\nimport type { PlotOptions, PlotHandle } from './types';\nimport { getPlotly, getLayout, getConfig, CHAIN_COLORS } from './types';\n\nexport function tracePlot(\n  container: HTMLElement,\n  data: InferenceData,\n  variable: string,\n  options?: PlotOptions,\n): PlotHandle {\n  const Plotly = getPlotly();\n  let currentVar = variable;\n\n  function render() {\n    const traces = data.chainNames.map((chain, i) => ({\n      y: Array.from(data.getDraws(currentVar, chain)),\n      type: 'scatter' as const,\n      mode: 'lines' as const,\n      name: chain,\n      line: { width: 0.8, color: CHAIN_COLORS[i % CHAIN_COLORS.length] },\n    }));\n    const layout = {\n      ...getLayout(options),\n      title: { text: `Trace: ${currentVar}` },\n      xaxis: { ...getLayout(options).xaxis as object, title: 'Iteration' },\n      yaxis: { ...getLayout(options).yaxis as object, title: currentVar },\n    };\n    Plotly.react(container, traces, layout, getConfig());\n  }\n\n  render();\n  return {\n    destroy: () => Plotly.purge(container),\n    update: (v) => { if (v) currentVar = v; render(); },\n  };\n}\n","import type { InferenceData } from '../types';\nimport type { PlotOptions, PlotHandle } from './types';\nimport { getPlotly, getLayout, getConfig, CHAIN_COLORS } from './types';\n\nexport function histogramPlot(\n  container: HTMLElement,\n  data: InferenceData,\n  variable: string,\n  options?: PlotOptions,\n): PlotHandle {\n  const Plotly = getPlotly();\n  let currentVar = variable;\n\n  function render() {\n    const traces = data.chainNames.map((chain, i) => ({\n      x: Array.from(data.getDraws(currentVar, chain)),\n      type: 'histogram' as const,\n      name: chain,\n      opacity: 0.6,\n      marker: { color: CHAIN_COLORS[i % CHAIN_COLORS.length] },\n    }));\n    const layout = {\n      ...getLayout(options),\n      title: { text: `Distribution: ${currentVar}` },\n      barmode: 'overlay' as const,\n      xaxis: { ...getLayout(options).xaxis as object, title: currentVar },\n      yaxis: { ...getLayout(options).yaxis as object, title: 'Count' },\n    };\n    Plotly.react(container, traces, layout, getConfig());\n  }\n\n  render();\n  return {\n    destroy: () => Plotly.purge(container),\n    update: (v) => { if (v) currentVar = v; render(); },\n  };\n}\n","import type { InferenceData } from '../types';\nimport type { PlotOptions, PlotHandle } from './types';\nimport { getPlotly, getLayout, getConfig, CHAIN_COLORS } from './types';\n\nexport function autocorrelationPlot(\n  container: HTMLElement,\n  data: InferenceData,\n  variable: string,\n  options?: PlotOptions,\n): PlotHandle {\n  const Plotly = getPlotly();\n  let currentVar = variable;\n  const MAX_LAG = 50;\n\n  function acf(draws: Float64Array, maxLag: number): number[] {\n    const n = draws.length;\n    let mean = 0;\n    for (let i = 0; i < n; i++) mean += draws[i]!;\n    mean /= n;\n    let variance = 0;\n    for (let i = 0; i < n; i++) variance += (draws[i]! - mean) ** 2;\n    if (variance === 0) return new Array(maxLag + 1).fill(0) as number[];\n    const result: number[] = [];\n    for (let lag = 0; lag <= maxLag; lag++) {\n      let sum = 0;\n      for (let i = 0; i < n - lag; i++) sum += (draws[i]! - mean) * (draws[i + lag]! - mean);\n      result.push(sum / variance);\n    }\n    return result;\n  }\n\n  function render() {\n    const lags = Array.from({ length: MAX_LAG + 1 }, (_, i) => i);\n    const traces = data.chainNames.map((chain, i) => {\n      const draws = data.getDraws(currentVar, chain);\n      const values = acf(draws, MAX_LAG);\n      return {\n        x: lags,\n        y: values,\n        type: 'bar' as const,\n        name: chain,\n        marker: { color: CHAIN_COLORS[i % CHAIN_COLORS.length] },\n        opacity: 0.7,\n      };\n    });\n    const layout = {\n      ...getLayout(options),\n      title: { text: `Autocorrelation: ${currentVar}` },\n      barmode: 'group' as const,\n      xaxis: { ...getLayout(options).xaxis as object, title: 'Lag' },\n      yaxis: { ...getLayout(options).yaxis as object, title: 'ACF', range: [-0.2, 1.05] },\n      shapes: [{\n        type: 'line' as const, x0: 0, x1: MAX_LAG, y0: 0, y1: 0,\n        line: { color: '#888', width: 1, dash: 'dash' as const },\n      }],\n    };\n    Plotly.react(container, traces, layout, getConfig());\n  }\n\n  render();\n  return {\n    destroy: () => Plotly.purge(container),\n    update: (v) => { if (v) currentVar = v; render(); },\n  };\n}\n","import type { InferenceData } from '../types';\nimport type { PlotOptions, PlotHandle } from './types';\nimport { getPlotly, getLayout, getConfig, CHAIN_COLORS } from './types';\n\nexport function forestPlot(\n  container: HTMLElement,\n  data: InferenceData,\n  options?: PlotOptions,\n): PlotHandle {\n  const Plotly = getPlotly();\n\n  function render() {\n    const summaries = data.summary();\n    const vars = summaries.map(s => s.variable);\n    const means = summaries.map(s => s.mean);\n\n    const hdiTrace = {\n      x: means,\n      y: vars,\n      type: 'scatter' as const,\n      mode: 'markers' as const,\n      marker: { size: 9, color: CHAIN_COLORS[0], symbol: 'diamond' },\n      error_x: {\n        type: 'data' as const,\n        symmetric: false,\n        array: summaries.map(s => s.hdi90[1] - s.mean),\n        arrayminus: summaries.map(s => s.mean - s.hdi90[0]),\n        thickness: 1.5,\n        width: 0,\n        color: CHAIN_COLORS[0],\n      },\n      name: '90% HDI',\n      showlegend: true,\n    };\n\n    const iqrTrace = {\n      x: means,\n      y: vars,\n      type: 'scatter' as const,\n      mode: 'markers' as const,\n      marker: { size: 0.1, color: 'rgba(0,0,0,0)' },\n      error_x: {\n        type: 'data' as const,\n        symmetric: false,\n        array: summaries.map(s => s.quantiles.q75 - s.mean),\n        arrayminus: summaries.map(s => s.mean - s.quantiles.q25),\n        thickness: 5,\n        width: 0,\n        color: CHAIN_COLORS[0],\n      },\n      name: '50% CI (IQR)',\n      showlegend: true,\n      hoverinfo: 'skip' as const,\n    };\n\n    const layout = {\n      ...getLayout(options),\n      title: { text: 'Forest Plot' },\n      height: Math.max(300, vars.length * 50 + 100),\n      xaxis: { ...getLayout(options).xaxis as object, title: 'Value', zeroline: true },\n      yaxis: { ...getLayout(options).yaxis as object, automargin: true },\n      shapes: [{\n        type: 'line' as const, x0: 0, x1: 0,\n        yref: 'paper' as const, y0: 0, y1: 1,\n        line: { color: '#888', width: 1, dash: 'dash' as const },\n      }],\n    };\n    Plotly.react(container, [iqrTrace, hdiTrace], layout, getConfig());\n  }\n\n  render();\n  return {\n    destroy: () => Plotly.purge(container),\n    update: () => render(),\n  };\n}\n","import type { InferenceData } from '../types';\nimport type { PlotOptions, PlotHandle } from './types';\nimport { getPlotly, getLayout, getConfig, CHAIN_COLORS } from './types';\n\nexport function cumulativeMeanPlot(\n  container: HTMLElement,\n  data: InferenceData,\n  variable: string,\n  options?: PlotOptions,\n): PlotHandle {\n  const Plotly = getPlotly();\n  let currentVar = variable;\n\n  function render() {\n    const traces = data.chainNames.map((chain, i) => {\n      const draws = data.getDraws(currentVar, chain);\n      const cumMean: number[] = [];\n      let sum = 0;\n      for (let j = 0; j < draws.length; j++) {\n        sum += draws[j]!;\n        cumMean.push(sum / (j + 1));\n      }\n      return {\n        y: cumMean,\n        type: 'scatter' as const,\n        mode: 'lines' as const,\n        name: chain,\n        line: { width: 1.5, color: CHAIN_COLORS[i % CHAIN_COLORS.length] },\n      };\n    });\n    const layout = {\n      ...getLayout(options),\n      title: { text: `Cumulative Mean: ${currentVar}` },\n      xaxis: { ...getLayout(options).xaxis as object, title: 'Iteration' },\n      yaxis: { ...getLayout(options).yaxis as object, title: `Mean (${currentVar})` },\n    };\n    Plotly.react(container, traces, layout, getConfig());\n  }\n\n  render();\n  return {\n    destroy: () => Plotly.purge(container),\n    update: (v) => { if (v) currentVar = v; render(); },\n  };\n}\n","import type { InferenceData } from '../types';\nimport type { PlotOptions, PlotHandle } from './types';\nimport { getPlotly, getLayout, getConfig, CHAIN_COLORS } from './types';\n\nexport function pairPlot(\n  container: HTMLElement,\n  data: InferenceData,\n  variables?: string[],\n  options?: PlotOptions,\n): PlotHandle {\n  const Plotly = getPlotly();\n  const vars = variables ?? data.variableNames.slice(0, 4);\n\n  function render() {\n    const dimensions = vars.map(v => ({\n      label: v,\n      values: Array.from(data.getAllDraws(v)),\n    }));\n\n    const traces = data.chainNames.map((chain, i) => {\n      const dims = vars.map(v => ({\n        label: v,\n        values: Array.from(data.getDraws(v, chain)),\n      }));\n      return {\n        type: 'splom' as const,\n        dimensions: dims,\n        name: chain,\n        marker: {\n          size: 2,\n          opacity: 0.3,\n          color: CHAIN_COLORS[i % CHAIN_COLORS.length],\n        },\n        showupperhalf: false,\n        diagonal: { visible: true },\n      };\n    });\n\n    const axisCfg = (theme: string | undefined) => {\n      const isDark = theme !== 'light';\n      return { gridcolor: isDark ? '#252836' : '#e5e7eb', linecolor: isDark ? '#333' : '#d1d5db' };\n    };\n\n    const axisOverrides: Record<string, unknown> = {};\n    for (let i = 1; i <= vars.length; i++) {\n      axisOverrides[`xaxis${i > 1 ? i : ''}`] = axisCfg(options?.theme);\n      axisOverrides[`yaxis${i > 1 ? i : ''}`] = axisCfg(options?.theme);\n    }\n\n    const layout = {\n      ...getLayout(options),\n      ...axisOverrides,\n      title: { text: 'Pair Plot' },\n      height: Math.max(400, vars.length * 180 + 60),\n      dragmode: 'select' as const,\n    };\n\n    Plotly.react(container, traces, layout, getConfig());\n  }\n\n  render();\n  return {\n    destroy: () => Plotly.purge(container),\n    update: () => render(),\n  };\n}\n","import type { InferenceData } from '../types';\nimport type { PlotOptions } from './types';\n\nexport function summaryTable(\n  container: HTMLElement,\n  data: InferenceData,\n  options?: PlotOptions,\n): { destroy(): void; update(): void } {\n  const isDark = options?.theme !== 'light';\n  const wrapper = document.createElement('div');\n  wrapper.style.cssText = 'overflow-x:auto;border-radius:8px;';\n  container.appendChild(wrapper);\n\n  function render() {\n    const summaries = data.summary();\n    const bg = isDark ? '#1a1d27' : '#f8f9fa';\n    const headerBg = isDark ? '#252836' : '#e5e7eb';\n    const borderColor = isDark ? '#333' : '#d1d5db';\n    const textColor = isDark ? '#e0e0e0' : '#1a1a1a';\n    const mutedColor = isDark ? '#888' : '#666';\n\n    let html = `<table style=\"width:100%;border-collapse:collapse;font-size:13px;color:${textColor};font-family:system-ui,sans-serif\">`;\n    html += `<thead><tr style=\"background:${headerBg}\">`;\n    for (const c of ['Variable', 'Mean', 'Std', '5%', '25%', '50%', '75%', '95%', 'ESS', 'R\\u0302', 'HDI 90%']) {\n      html += `<th style=\"padding:10px 14px;text-align:left;font-weight:500;font-size:11px;text-transform:uppercase;letter-spacing:0.5px;color:${mutedColor};white-space:nowrap\">${c}</th>`;\n    }\n    html += '</tr></thead><tbody>';\n\n    for (const s of summaries) {\n      const rhatColor = s.rhat === undefined ? mutedColor : s.rhat < 1.05 ? '#22c55e' : s.rhat < 1.1 ? '#eab308' : '#ef4444';\n      const essColor = s.ess > 400 ? '#22c55e' : s.ess > 100 ? '#eab308' : '#ef4444';\n      html += `<tr style=\"border-bottom:1px solid ${borderColor}\">`;\n      html += `<td style=\"padding:8px 14px;font-weight:600\">${s.variable}</td>`;\n      html += td(s.mean, textColor);\n      html += td(s.stdev, textColor);\n      html += td(s.quantiles.q5, textColor);\n      html += td(s.quantiles.q25, textColor);\n      html += td(s.quantiles.q50, textColor);\n      html += td(s.quantiles.q75, textColor);\n      html += td(s.quantiles.q95, textColor);\n      html += `<td style=\"padding:8px 14px;color:${essColor};font-variant-numeric:tabular-nums\">${Math.round(s.ess)}</td>`;\n      html += `<td style=\"padding:8px 14px;color:${rhatColor};font-variant-numeric:tabular-nums\">${s.rhat !== undefined ? s.rhat.toFixed(3) : '\\u2014'}</td>`;\n      html += `<td style=\"padding:8px 14px;font-variant-numeric:tabular-nums;white-space:nowrap\">[${s.hdi90[0].toFixed(3)}, ${s.hdi90[1].toFixed(3)}]</td>`;\n      html += '</tr>';\n    }\n    html += '</tbody></table>';\n    wrapper.innerHTML = html;\n  }\n\n  render();\n  return { destroy: () => wrapper.remove(), update: render };\n}\n\nfunction td(v: number, color: string): string {\n  return `<td style=\"padding:8px 14px;font-variant-numeric:tabular-nums;color:${color}\">${isNaN(v) ? '\\u2014' : v.toFixed(4)}</td>`;\n}\n","import type { InferenceData, FileFormat, ChainData } from './types';\nimport { MCMCData } from './inference-data';\nimport { parseTuringCSV } from './parsers/turing-csv';\nimport { parseStanCSV, parseStanCSVFiles } from './parsers/stan-csv';\nimport { parseMCMCChainsJSON } from './parsers/mcmcchains-json';\nimport { detectFormat } from './parsers/detect';\n\nexport type { InferenceData, ChainData, SequenceStats, VariableStats, VariableSummary, FileFormat } from './types';\nexport { MCMCData } from './inference-data';\nexport { computeESS } from './stats/ess';\nexport { computeRhat } from './stats/rhat';\nexport { computeMean, computeStdev, computeQuantiles, computeHDI } from './stats/summary';\nexport { detectFormat } from './parsers/detect';\n\nexport * as plots from './plots';\nexport type { PlotOptions, PlotHandle } from './plots/types';\n\nexport function fromTuringCSV(text: string): InferenceData {\n  return new MCMCData(parseTuringCSV(text));\n}\n\nexport function fromStanCSV(text: string): InferenceData {\n  return new MCMCData(parseStanCSV(text));\n}\n\nexport function fromStanCSVFiles(files: string[]): InferenceData {\n  return new MCMCData(parseStanCSVFiles(files));\n}\n\nexport function fromAutoDetect(text: string): InferenceData {\n  const format = detectFormat(text);\n  switch (format) {\n    case 'turing-csv':\n      return fromTuringCSV(text);\n    case 'stan-csv':\n      return fromStanCSV(text);\n    case 'mcmcchains-json':\n      return fromMCMCChainsJSON(text);\n    default:\n      throw new Error(`Unable to detect format. Use fromTuringCSV(), fromStanCSV(), or fromMCMCChainsJSON() directly.`);\n  }\n}\n\nexport function fromMCMCChainsJSON(text: string): InferenceData {\n  return new MCMCData(parseMCMCChainsJSON(text));\n}\n\nexport function fromChainArrays(\n  data: Record<string, Record<string, number[]>>,\n): InferenceData {\n  const chains = new Map<string, ChainData>();\n  for (const [chainName, vars] of Object.entries(data)) {\n    const draws = new Map<string, Float64Array>();\n    let maxLen = 0;\n    for (const [varName, values] of Object.entries(vars)) {\n      const arr = new Float64Array(values);\n      draws.set(varName, arr);\n      maxLen = Math.max(maxLen, arr.length);\n    }\n    chains.set(chainName, { name: chainName, draws, drawCount: maxLen });\n  }\n  return new MCMCData(chains);\n}\n"],"mappings":"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","names":["mean","mean","stdev","mean"]}